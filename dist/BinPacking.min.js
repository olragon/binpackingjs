!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("BinPacking",[],e):"object"==typeof exports?exports.BinPacking=e():t.BinPacking=e()}("undefined"!=typeof self?self:this,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=19)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var i=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.score_1=t.MAX_INT,this.score_2=t.MAX_INT,void 0!==e&&(this.score_1=e),void 0!==n&&(this.score_2=n)}return r(t,[{key:"valueOf",value:function(){return this.score_1+this.score_2}},{key:"assign",value:function(t){this.score_1=t.score_1,this.score_2=t.score_2}},{key:"isBlank",value:function(){return this.score_1===t.MAX_INT}},{key:"decreaseBy",value:function(t){this.score_1+=t,this.score_2+=t}}]),t}();i.MAX_INT=Number.MAX_SAFE_INTEGER,e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(0),u=(r=o,r&&r.__esModule?r:{default:r});var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,[{key:"findPositionForNewNode",value:function(t,e){var n=this,r=new u.default,i=t.width,o=t.height;return e.forEach(function(e){n.tryPlaceRectIn(e,t,i,o,r),n.tryPlaceRectIn(e,t,o,i,r)}),r}},{key:"tryPlaceRectIn",value:function(t,e,n,r,i){if(t.width>=n&&t.height>=r){var o=this.calculateScore(t,n,r);o<i&&(e.x=t.x,e.y=t.y,e.width=n,e.height=r,e.packed=!0,i.assign(o))}}},{key:"calculateScore",value:function(t,e,n){throw"NotImplementedError"}}]),t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=u(n(1)),o=u(n(0));function u(t){return t&&t.__esModule?t:{default:t}}var a=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default);function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return r(e,[{key:"calculateScore",value:function(t,e,n){var r=[Math.abs(t.width-e),Math.abs(t.height-n)].sort(function(t,e){return t-e});return new o.default(r[0],r[1])}}]),e}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var i=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.width=null,this.height=null,this.x=0,this.y=0,this.packed=!1,this.width=e,this.height=n}return r(t,[{key:"rotate",value:function(){var t=this.width,e=this.height;this.width=e,this.height=t}},{key:"label",get:function(){return this.width+"x"+this.height+" at ["+this.x+","+this.y+"]"}},{key:"area",get:function(){return this.width*this.height}}]),t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var i=function(){function t(e,n,r,i,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name="",this.width=0,this.height=0,this.depth=0,this.maxWeight=0,this.items=[],this.name=e,this.width=n,this.height=r,this.depth=i,this.maxWeight=o}return r(t,[{key:"getName",value:function(){return this.name}},{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"getDepth",value:function(){return this.depth}},{key:"getMaxWeight",value:function(){return this.maxWeight}},{key:"getItems",value:function(){return this.items}},{key:"getVolume",value:function(){return this.getWidth()*this.getHeight()*this.getDepth()}},{key:"getPackedWeight",value:function(){return this.items.reduce(function(t,e){return t+e.getWeight()},0)}},{key:"putItem",value:function(t,e){var n=!1;t.position=e;for(var r=0;r<6;r++){t.rotationType=r;var i=t.getDimension();if(!(this.getWidth()<e[0]+i[0]||this.getHeight()<e[1]+i[1]||this.getDepth()<e[2]+i[2])){n=!0;for(var o=0;o<this.items.length;o++){if(this.items[o].intersect(t)){n=!1;break}}return n&&this.items.push(t),n}}return n}}]),t}();e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var u=e.RotationType_WHD=0,a=e.RotationType_HWD=1,s=e.RotationType_HDW=2,c=e.RotationType_DHW=3,f=e.RotationType_DWH=4,h=e.RotationType_WDH=5,l=e.WidthAxis=0,p=e.HeightAxis=1,y=e.DepthAxis=2,d=(e.StartPosition=[0,0,0],e.RotationTypeStrings=(r={},o(r,u,"RotationType_WHD (w,h,d)"),o(r,a,"RotationType_HWD (h,w,d)"),o(r,s,"RotationType_HDW (h,d,w)"),o(r,c,"RotationType_DHW (d,h,w)"),o(r,f,"RotationType_DWH (d,w,h)"),o(r,h,"RotationType_WDH (w,d,h)"),r)),g=function(){function t(e,n,r,i,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name="",this.width=0,this.height=0,this.depth=0,this.weight=0,this.rotationType=u,this.position=[],this.name=e,this.width=n,this.height=r,this.depth=i,this.weight=o}return i(t,[{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"getDepth",value:function(){return this.depth}},{key:"getWeight",value:function(){return this.weight}},{key:"getRotationType",value:function(){return this.rotationType}},{key:"getRotationTypeString",value:function(){return d[this.getRotationType()]}},{key:"getDimension",value:function(){var t=void 0;switch(this.rotationType){case u:t=[this.getWidth(),this.getHeight(),this.getDepth()];break;case a:t=[this.getHeight(),this.getWidth(),this.getDepth()];break;case s:t=[this.getHeight(),this.getDepth(),this.getWidth()];break;case c:t=[this.getDepth(),this.getHeight(),this.getWidth()];break;case f:t=[this.getDepth(),this.getWidth(),this.getHeight()];break;case h:t=[this.getWidth(),this.getDepth(),this.getHeight()]}return t}},{key:"intersect",value:function(t){return v(this,t,l,p)&&v(this,t,p,y)&&v(this,t,l,y)}},{key:"getVolume",value:function(){return this.getWidth()*this.getHeight()*this.getDepth()}}]),t}();e.default=g;var v=e.rectIntersect=function(t,e,n,r){var i=void 0,o=void 0,u=void 0,a=void 0,s=void 0,c=void 0,f=void 0,h=void 0;return i=t.getDimension(),o=e.getDimension(),u=t.position[n]+i[n]/2,a=t.position[r]+i[r]/2,s=e.position[n]+o[n]/2,c=e.position[r]+o[r]/2,f=Math.max(u,s)-Math.min(u,s),h=Math.max(a,c)-Math.min(a,c),f<(i[n]+o[n])/2&&h<(i[r]+o[r])/2}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.heuristics=e.Packer=e.Box=e.Bin=void 0;var r=a(n(7)),i=a(n(3)),o=a(n(8)),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(13));function a(t){return t&&t.__esModule?t:{default:t}}e.Bin=r.default,e.Box=i.default,e.Packer=o.default,e.heuristics=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FreeSpaceBox=void 0;var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=a(n(2)),u=a(n(3));function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var c=function(){function t(e,n,r){s(this,t),this.width=null,this.height=null,this.boxes=[],this.heuristic=null,this.freeRectangles=[],this.width=e,this.height=n,this.freeRectangles=[new f(e,n)],this.heuristic=r||new o.default}return i(t,[{key:"insert",value:function(t){if(t.packed)return!1;if(this.heuristic.findPositionForNewNode(t,this.freeRectangles),!t.packed)return!1;for(var e=this.freeRectangles.length,n=0;n<e;)this.splitFreeNode(this.freeRectangles[n],t)?(this.freeRectangles.splice(n,1),e--):n++;return this.pruneFreeList(),this.boxes.push(t),!0}},{key:"scoreFor",value:function(t){var e=new u.default(t.width,t.height);return this.heuristic.findPositionForNewNode(e,this.freeRectangles)}},{key:"isLargerThan",value:function(t){return this.width>=t.width&&this.height>=t.height||this.height>=t.width&&this.width>=t.height}},{key:"splitFreeNode",value:function(t,e){return!(e.x>=t.x+t.width||e.x+e.width<=t.x||e.y>=t.y+t.height||e.y+e.height<=t.y)&&(this.trySplitFreeNodeVertically(t,e),this.trySplitFreeNodeHorizontally(t,e),!0)}},{key:"trySplitFreeNodeVertically",value:function(t,e){e.x<t.x+t.width&&e.x+e.width>t.x&&(this.tryLeaveFreeSpaceAtTop(t,e),this.tryLeaveFreeSpaceAtBottom(t,e))}},{key:"tryLeaveFreeSpaceAtTop",value:function(t,e){if(e.y>t.y&&e.y<t.y+t.height){var n=r({},t);n.height=e.y-n.y,this.freeRectangles.push(n)}}},{key:"tryLeaveFreeSpaceAtBottom",value:function(t,e){if(e.y+e.height<t.y+t.height){var n=r({},t);n.y=e.y+e.height,n.height=t.y+t.height-(e.y+e.height),this.freeRectangles.push(n)}}},{key:"trySplitFreeNodeHorizontally",value:function(t,e){e.y<t.y+t.height&&e.y+e.height>t.y&&(this.tryLeaveFreeSpaceOnLeft(t,e),this.tryLeaveFreeSpaceOnRight(t,e))}},{key:"tryLeaveFreeSpaceOnLeft",value:function(t,e){if(e.x>t.x&&e.x<t.x+t.width){var n=r({},t);n.width=e.x-n.x,this.freeRectangles.push(n)}}},{key:"tryLeaveFreeSpaceOnRight",value:function(t,e){if(e.x+e.width<t.x+t.width){var n=r({},t);n.x=e.x+e.width,n.width=t.x+t.width-(e.x+e.width),this.freeRectangles.push(n)}}},{key:"pruneFreeList",value:function(){for(var t=0;t<this.freeRectangles.length;){var e=t+1;if(e===this.freeRectangles.length)break;for(;e<this.freeRectangles.length;){if(this.isContainedIn(this.freeRectangles[t],this.freeRectangles[e])){this.freeRectangles.splice(t,1),t--;break}this.isContainedIn(this.freeRectangles[e],this.freeRectangles[t])?this.freeRectangles.splice(e,1):e++,t++}}}},{key:"isContainedIn",value:function(t,e){return t&&e&&t.x>=e.x&&t.y>=e.y&&t.x+t.width<=e.x+e.width&&t.y+t.height<=e.y+e.height}},{key:"area",get:function(){return this.width*this.height}},{key:"efficiency",get:function(){var t=0;return this.boxes.forEach(function(e){t+=e.area}),100*t/this.area}},{key:"label",get:function(){return this.width+"x"+this.height+" "+this.efficiency+"%"}}]),t}();e.default=c;var f=e.FreeSpaceBox=function t(e,n){s(this,t),this.x=0,this.y=0,this.width=null,this.height=null,this.width=e,this.height=n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=u(n(0)),o=u(n(9));function u(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bins=[],this.unpackedBoxes=[],this.bins=e}return r(t,[{key:"pack",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],r=void 0;if(0===(t=t.filter(function(t){return!t.packed})).length)return n;for(var u=e.limit||i.default.MAX_INT,a=new o.default(this.bins,t);(r=a.bestFit())&&(r.bin.insert(r.box),a.removeBox(r.box),a.recalculateBin(r.bin),n.push(r.box),!(n.length>=u)););return this.unpackedBoxes=t.filter(function(t){return!t.packed}),n}}]),t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(10),u=(r=o,r&&r.__esModule?r:{default:r});var a=function(){function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.entries=[],e.forEach(function(t){r.addBinEntries(t,n)})}return i(t,[{key:"debug",value:function(){n(11),console.table(this.entries.map(function(t){return{bin:t.bin.label,box:t.box.label,score:t.score}}))}},{key:"addBinEntries",value:function(t,e){var n=this;e.forEach(function(e){var r=new u.default(t,e);r.calculate(),n.entries.push(r)})}},{key:"any",value:function(){return this.boxes.some(function(t){return t})}},{key:"largestNotFitingBox",value:function(){var t=this;this.entries.filter(function(t){return t.fit}).map(function(t){return t.box});return this.entries.forEach(function(e){t.fittingBoxes.contains(e.box)&&(t.unfit=e)}),!!null.box&&null}},{key:"bestFit",value:function(){for(var t=null,e=0;e<this.entries.length;e++){var n=this.entries[e];n.fit()&&((null===t||n.score<t.score)&&(t=n))}return t}},{key:"removeBox",value:function(t){this.entries=this.entries.filter(function(e){return e.box!==t})}},{key:"addBin",value:function(t){this.addBinEntries(t,this.currentBoxes())}},{key:"recalculateBin",value:function(t){this.entries.filter(function(e){return e.bin===t}).forEach(function(t){return t.calculate()})}},{key:"currentBoxes",value:function(){return[].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(new Set(this.entries.map(function(t){return t.box}))))}}]),t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var i=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bin=null,this.box=null,this.score=null,this.bin=e,this.box=n}return r(t,[{key:"calculate",value:function(){return this.score=this.bin.scoreFor(this.box),this.score}},{key:"fit",value:function(){return!this.score.isBlank()}}]),t}();e.default=i},function(t,e,n){!function(){"use strict";!function(){if("undefined"==typeof console)throw new Error("Weird, console object is undefined");if("function"!=typeof console.table){var t=function(t,e){return typeof e===t}.bind(null,"string"),e=o.bind(null,t),r=o.bind(null,Array.isArray),i=n(12);console.table=function(){var t=Array.prototype.slice.call(arguments);return 2===t.length&&"string"==typeof t[0]&&Array.isArray(t[1])?function(t,e){var n=u(e),r=n.indexOf("\n");if(r>0){t.length>r&&(r=t.length),console.log(t);var i,o="";for(i=0;i<r;i+=1)o+="-";console.log(o)}console.log(n)}(t[0],t[1]):2===t.length&&e(t[0])&&r(t[1])?function(t,e){var n=new i;e.forEach(function(e){e.forEach(function(e,r){n.cell(t[r],e)}),n.newRow()});var r=n.toString();console.log(r)}(t[0],t[1]):void t.forEach(function(t){if("string"==typeof t)return console.log(t);Array.isArray(t)?console.log(u(t)):"object"==typeof t&&console.log(a(t))})}}function o(t,e){return Array.isArray(e)&&e.every(t)}function u(t){var e=new i;return t.forEach(function(t){"string"==typeof t||"number"==typeof t?e.cell("item",t):Object.keys(t).forEach(function(n){e.cell(n,t[n])}),e.newRow()}),e.toString()}function a(t){return u((e=t,Object.keys(e).map(function(t){return{key:t,value:e[t]}})));var e}}()}()},function(t,e){t.exports=n;function n(){this.rows=[],this.row={__printers:{}}}n.prototype.newRow=function(){return this.rows.push(this.row),this.row={__printers:{}},this},n.prototype.cell=function(t,e,n){return this.row[t]=e,this.row.__printers[t]=n||r,this},n.prototype.separator="  ";function r(t){return void 0===t?"":""+t}function i(t){return t.replace(/\u001b\[\d+m/g,"").length}n.string=r,n.leftPadder=o;function o(t){return function(e,n){var o=r(e),u=i(o);return(n>u?Array(n-u+1).join(t):"")+o}}var u=n.padLeft=o(" ");n.rightPadder=a;function a(t){return function(e,n){var o=r(e),u=i(o);return o+(n>u?Array(n-u+1).join(t):"")}}var s=a(" ");n.number=function(t){return function(e,n){if(null==e)return"";if("number"!=typeof e)throw new Error(e+" is not a number");var r=null==t?e+"":e.toFixed(t);return u(r,n)}};function c(t,e){for(var n in t)"__printers"!=n&&e(n,t[n])}n.prototype.columns=function(){for(var t={},e=0;e<2;e++)this.rows.forEach(function(e){var n=0;c(e,function(e){n=Math.max(n,t[e]||0),t[e]=n,n++})});return Object.keys(t).sort(function(e,n){return t[e]-t[n]})},n.prototype.print=function(){var t=this.columns(),e=this.separator,n={},r="";return this.rows.forEach(function(t){c(t,function(e,r){var o=t.__printers[e].call(t,r);n[e]=Math.max(i(o),n[e]||0)})}),this.rows.forEach(function(i){var o="";t.forEach(function(t){var r=n[t],u=i.hasOwnProperty(t)?""+i.__printers[t].call(i,i[t],r):"";o+=s(u,r)+e}),o=o.slice(0,-e.length),r+=o+"\n"}),r},n.prototype.toString=function(){var t=this.columns(),e=new n;return e.separator=this.separator,t.forEach(function(t){e.cell(t,t)}),e.newRow(),e.pushDelimeter(t),e.rows=e.rows.concat(this.rows),this.totals&&this.rows.length&&(e.pushDelimeter(t),this.forEachTotal(e.cell.bind(e)),e.newRow()),e.print()},n.prototype.pushDelimeter=function(t){return(t=t||this.columns()).forEach(function(t){this.cell(t,void 0,o("-"))},this),this.newRow()},n.prototype.forEachTotal=function(t){for(var e in this.totals){var n=this.totals[e],r=n.init,i=this.rows.length;this.rows.forEach(function(t,o){r=n.reduce.call(t,r,t[e],o,i)}),t(e,r,n.printer)}},n.prototype.printTransposed=function(t){t=t||{};var e=new n;return e.separator=t.separator||this.separator,this.columns().forEach(function(n){e.cell(0,n,t.namePrinter),this.rows.forEach(function(t,r){e.cell(r+1,t[n],t.__printers[n])}),e.newRow()},this),e.print()},n.prototype.sort=function(t){if("function"==typeof t)return this.rows.sort(t),this;var e=(Array.isArray(t)?t:this.columns()).map(function(t){var e="asc",n=/(.*)\|\s*(asc|des)\s*$/.exec(t);return n&&(t=n[1],e=n[2]),function(n,r){return"asc"==e?f(n[t],r[t]):f(r[t],n[t])}});return this.sort(function(t,n){for(var r=0;r<e.length;r++){var i=e[r](t,n);if(0!=i)return i}return 0})};function f(t,e){return t===e?0:void 0===t?1:void 0===e?-1:null===t?1:null===e?-1:t>e?1:t<e?-1:f(String(t),String(e))}n.prototype.total=function(t,e){return e=e||{},this.totals=this.totals||{},this.totals[t]={reduce:e.reduce||n.aggr.sum,printer:e.printer||u,init:null==e.init?0:e.init},this},(n.aggr={}).printer=function(t,e){return e=e||r,function(n,r){return u(t+e(n),r)}},n.aggr.sum=function(t,e){return t+e},n.aggr.avg=function(t,e,n,r){return t+=e,n+1==r?t/r:t},n.print=function(t,e,r){var i=e||{};e="function"==typeof e?e:function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=i[n]||{};e(r.name||n,t[n],r.printer)}};var o=new n,u=o.cell.bind(o);return Array.isArray(t)?(r=r||function(t){return t.toString()},t.forEach(function(t){e(t,u),o.newRow()})):(r=r||function(t){return t.printTransposed({separator:" : "})},e(t,u),o.newRow()),r(o)},n.log=function(t,e,r){console.log(n.print(t,e,r))},n.prototype.log=function(){console.log(this.toString())}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(14);Object.defineProperty(e,"BestAreaFit",{enumerable:!0,get:function(){return a(r).default}});var i=n(15);Object.defineProperty(e,"BestLongSideFit",{enumerable:!0,get:function(){return a(i).default}});var o=n(2);Object.defineProperty(e,"BestShortSideFit",{enumerable:!0,get:function(){return a(o).default}});var u=n(16);Object.defineProperty(e,"BottomLeft",{enumerable:!0,get:function(){return a(u).default}});function a(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=u(n(1)),o=u(n(0));function u(t){return t&&t.__esModule?t:{default:t}}var a=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default);function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return r(e,[{key:"calculateScore",value:function(t,e,n){var r=t.width*t.height-e*n,i=Math.abs(t.width-e),u=Math.abs(t.height-n),a=Math.min(i,u);return new o.default(r,a)}}]),e}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=u(n(1)),o=u(n(0));function u(t){return t&&t.__esModule?t:{default:t}}var a=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default);function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return r(e,[{key:"calculateScore",value:function(t,e,n){var r=[Math.abs(t.width-e),Math.abs(t.height-n)].sort(function(t,e){return t-e}).reverse();return new o.default(r[0],r[1])}}]),e}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=u(n(1)),o=u(n(0));function u(t){return t&&t.__esModule?t:{default:t}}var a=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.default);function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return r(e,[{key:"calculateScore",value:function(t,e,n){var r=t.y+n;return new o.default(r,t.x)}}]),e}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Packer=e.Item=e.Bin=void 0;var r=u(n(4)),i=u(n(5)),o=u(n(18));function u(t){return t&&t.__esModule?t:{default:t}}e.Bin=r.default,e.Item=i.default,e.Packer=o.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(4),u=(r=o,r&&r.__esModule,n(5));var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bins=[],this.items=[],this.unfitItems=[]}return i(t,[{key:"addBin",value:function(t){this.bins.push(t)}},{key:"addItem",value:function(t){this.items.push(t)}},{key:"findFittedBin",value:function(t){for(var e=0;e<this.bins.length;e++){var n=this.bins[e];if(n.putItem(t,u.StartPosition))return 1===n.items.length&&n.items[0]===t&&(n.items=[]),n}return null}},{key:"getBiggerBinThan",value:function(t){for(var e=t.getVolume(),n=0;n<this.bins;n++){var r=this.bins[n];if(r.getVolume()>e)return r}return null}},{key:"unfitItem",value:function(){0!==this.items.length&&(this.unfitItems.push(this.items[0]),this.items.splice(0,1))}},{key:"packToBin",value:function(t,e){var n=null,r=[];if(!t.putItem(e[0],u.StartPosition)){var i=this.getBiggerBinThan(t);return i?this.packToBin(i,e):this.items}for(var o=1;o<this.items.length;o++){var a=!1,s=this.items[o],c=t.getMaxWeight();if(!c||s.getWeight()+t.getPackedWeight()<=c)t:for(var f=0;f<3;f++)for(var h=0;h<t.items.length;h++){var l=void 0,p=t.items[h];switch(f){case u.WidthAxis:l=[p.position[0]+p.getWidth(),p.position[1],p.position[2]];break;case u.HeightAxis:l=[p.position[0],p.position[1]+p.getHeight(),p.position[2]];break;case u.DepthAxis:l=[p.position[0],p.position[1],p.position[2]+p.getDepth()]}if(t.putItem(s,l)){a=!0;break t}}if(!a){for(;null!==n;)if(n=this.getBiggerBinThan(t)){n.items.push(s);if(0===this.packToBin(n,n.items).length){t=n,a=!0;break}}a||r.push(s)}}return r}},{key:"pack",value:function(){for(this.bins.sort(function(t,e){return t.getVolume()>e.getVolume()}),this.items.sort(function(t,e){return t.getVolume()>e.getVolume()});this.items.length>0;){var t=this.findFittedBin(this.items[0]);null!==t?this.items=this.packToBin(t,this.items):this.unfitItem()}return null}}]),t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BP3D=e.BP2D=void 0;var r=o(n(6)),i=o(n(17));function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}e.BP2D=r,e.BP3D=i}])});